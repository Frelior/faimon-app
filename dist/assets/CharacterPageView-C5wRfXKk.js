import{N as w,x as b,e as C,l as x,m,k as L,B as T,c as e,h as c,a as p,F as _,i as y,b as H,O as M,n as B,u,A as h,P as S,t as N,o as t,_ as V}from"./index-BySFH6cU.js";async function I(i){const{data:a,error:r}=await b.from("skills").select("*").eq("character_id",i).order("type").order("order_index");if(r){console.log(r);return}return a.map(w)||[]}function n(i,a){return i.filter(s=>s.type===a).sort((s,v)=>(s.order_index??0)-(v.order_index??0))}function W(i,a,r){return w({name:"",description:"",image_path:"",type:a,order_index:r,character_id:i})}function X(i){return i.map(a=>{const r=i.indexOf(a)+1;return console.log("index",r),{...a,order_index:r}})}const O={key:0,class:"body"},P={key:0,class:"info-block"},q={class:"block-text"},z=["innerHTML"],j=["innerHTML"],F=["src"],A={key:0,class:"info-block"},D={class:"block-title"},E=["src"],U={class:"block-text"},$=["innerHTML"],G=["innerHTML"],J={key:1},K=C({__name:"CharacterPageView",props:{id:{},previewSkills:{},previewCharacter:{}},setup(i){const a=i,r=x(),d=m(()=>a.previewCharacter?a.previewCharacter:(r.changeCurrentCharacterId(Number(a.id)),r.currentCharacter)),s=L(a.previewSkills??[]);T(d,async()=>{if(!a.previewSkills&&d.value){const k=await I(d.value.id);s.value=k??[],console.log(k)}},{immediate:!0});const v=m(()=>[{key:"attack",title:"Базовая атака",skills:n(s.value,"attack")},{key:"technique",title:"Техника",skills:n(s.value,"technique")},{key:"ultimate",title:"Ульта",skills:n(s.value,"ultimate")},{key:"counter",title:"Контратака",skills:n(s.value,"counter")},{key:"dodge",title:"Уворот",skills:n(s.value,"dodge")},{key:"passive",title:"Пассивки",skills:n(s.value,"passive")},{key:"constellation",title:"Консты",skills:n(s.value,"constellation")},{key:"weapon",title:"Оружие",skills:n(s.value,"weapon")},{key:"coreStamp",title:"Именной штамп",skills:n(s.value,"coreStamp")}]),g=m(()=>n(s.value,"description"));return(k,f)=>(t(),e("div",{class:B([{"view-container":!a.previewSkills},"character-page"])},[d.value&&s.value.length>0?(t(),e("div",O,[g.value?(t(),e("div",P,[f[0]||(f[0]=p("p",{class:"block-title"},"Общее:",-1)),(t(!0),e(_,null,y(g.value,l=>(t(),e("div",{class:"block-skill description",key:l.id},[p("div",q,[l.name?(t(),e("p",{key:0,class:"skill-title",innerHTML:u(h)(l.name)},null,8,z)):c("",!0),l.description?(t(),e("p",{key:1,class:"skill-desc",innerHTML:u(h)(l.description)},null,8,j)):c("",!0)]),l.image_path?(t(),e("img",{key:0,src:l.preview_url??u(S)(l.image_path)??"",class:"block-skill-image"},null,8,F)):c("",!0)]))),128))])):c("",!0),(t(!0),e(_,null,y(v.value,l=>(t(),e(_,{key:l.key},[l.skills.length>0?(t(),e("div",A,[p("p",D,N(l.title)+":",1),(t(!0),e(_,null,y(l.skills,o=>(t(),e("div",{class:"block-skill",key:o.id},[o.image_path?(t(),e("img",{key:0,src:o.preview_url??u(S)(o.image_path)??"",class:"block-skill-image"},null,8,E)):c("",!0),p("div",U,[o.name?(t(),e("p",{key:0,class:"skill-title",innerHTML:u(h)(o.name)},null,8,$)):c("",!0),o.description?(t(),e("p",{key:1,class:"skill-desc",innerHTML:u(h)(o.description)},null,8,G)):c("",!0)])]))),128))])):c("",!0)],64))),128))])):(t(),e("div",J,[H(M)]))],2))}}),Q=V(K,[["__scopeId","data-v-45e4f2ef"]]),Y=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"}));export{Q as C,n as a,Y as b,W as c,I as g,X as s};
